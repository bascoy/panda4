@use 'sass:list';
@use 'sass:map';
@use 'sass:meta';

@use './variables' as *;

@mixin mq($min-screen: false, $max-screen: false, $orientation: false) {
  @if $min-screen and $max-screen {
    @media all and (min-width: $min-screen) and (max-width: $max-screen) {
      @content;
    }
  } @else if $max-screen and not $min-screen {
    @media all and (max-width: $max-screen) {
      @content;
    }
  } @else {
    @media all and (min-width: $min-screen) {
      @content;
    }
  }
}

@mixin generate-utility($utility, $breakpoint: false) {
  $values: map.get($utility, values);

  @if meta.type-of($values) == 'string' or meta.type-of(list.nth($values, 1)) != 'list' {
    $values: list.zip($values, $values);
  }

  @each $key, $value in $values {
    $property: map.get($utility, property);
    $property-class: if(
      map.has-key($utility, class),
      map.get($utility, class),
      $property
    );
    $property-class-modifier: if($key, '-' + $key, '');
    $breakpoint-class: if($breakpoint, $breakpoint + '\\:', '');
    $generated-property: '.p4-' + $breakpoint-class + $property-class + $property-class-modifier;

    @if $value {
      #{$generated-property} {
        @if meta.type-of($property) == 'list' or meta.type-of($property) == 'map' {
          @each $prop, $val in $value {
            #{$prop}: #{$val};
          }
        } @else {
          #{$property}: #{$value};
        }
      
      }
    }
  }
}

@mixin generate-container() {
  
  @each $key, $container in $p4-containers {
    $breakpoint: map.get($container, breakpoint);
    $max-width: map.get($container, max-width);
    
    .p4-container-#{$key} {
      @extend .p4-container;
    }

    @include mq($min-screen: $breakpoint) {
      .p4-container-#{$key} {
        max-width: #{$max-width};
      }
    }
  }
}
