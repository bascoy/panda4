@use 'sass:list';
@use 'sass:map';
@use 'sass:meta';

@use '../abstract' as *;

@each $breakpoint in map.keys($p4-breakpoint-utilities) {
  $break: if(
    $breakpoint == list.nth(map.keys($p4-breakpoint-utilities), 1),
    '',
    '#{$breakpoint}'
  );
  $breakpoint-value: map.get($p4-breakpoint-utilities, $breakpoint);

  @if $break != '' {
    @include mq($min-screen: $breakpoint-value) {
      @each $key, $utility in $p4-utilities {
        @if meta.type-of($utility) == 'map' and (map.get($utility, responsive)) {
          @include generate-utility($utility, $break);
        }
      }
    }
  } @else {
    @each $key, $utility in $p4-utilities {
      @if meta.type-of($utility) == 'map' {
        @include generate-utility($utility);
      }
    }
  }
}
